language: node_js
node_js:
  - 16
# branches:
#   only:
#     - main
cache:
  yarn: true
script:
  # - git config --global user.name "${GH_NAME}"
  # - git config --global user.email "${GH_EMAIL}"
  # - echo "machine github.com login ${GH_NAME} password ${GH_TOKEN}" > ~/.netrc
  - yarn install
  - yarn build
  - 
  # - GIT_USER="${GH_NAME}" yarn deploy
  # Netlify
  ##
  - yarn install netlify-cli -g
  - |
    if [ "${TRAVIS_PULL_REQUEST}" = "false" ] && [ $TRAVIS_BRANCH != "main" ]; then
      bash _build_scripts/publish-to-netlify.sh
    fi
  # bash _build_scripts/slack-netlify-message.sh
  ##
  # End Netlify