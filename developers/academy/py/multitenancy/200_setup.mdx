---
title: Database setup
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import FilteredTextBlock from '@site/src/components/Documentation/FilteredTextBlock';
import PyCode from '!!raw-loader!./_snippets/100_config.py';

Let's see how `MyPrivateJournal` can create and configure a multi-tenant (MT) collection to work for their application.

## <i class="fa-solid fa-square-chevron-right"></i> Create a multi-tenant collection

### <i class="fa-solid fa-code"></i> Create a collection

A collection's multi-tenancy status can only be set at creation time. This is **immutable**, and can be done as shown below:

<FilteredTextBlock
  text={PyCode}
  startMarker="# BasicMTEnable"
  endMarker="# END BasicMTEnable"
  language="py"
/>

This will create a multi-tenant collection.

### <i class="fa-solid fa-code"></i> Create a tenant

Once a multi-tenant collection is created, you can manage its tenants through the `.tenant` namespace. For now, let's focus on creating tenants.

The easiest way to create tenants is by providing a list of tenant names to the `create` method:

<FilteredTextBlock
  text={PyCode}
  startMarker="# BasicTenantCreation"
  endMarker="# END BasicTenantCreation"
  language="py"
/>

:::caution Tenant names are case-sensitive
Tenant names are case-sensitive. This means that `bob`, `Bob` and `BoB` are considered different tenants.
:::

### <i class="fa-solid fa-code"></i> Complete code example

Putting the two together, your collection creation & tenant creation code may look like this:

<details>
  <summary>Complete code example</summary>

<FilteredTextBlock
  text={PyCode}
  startMarker="# FullBasicMT"
  endMarker="# END FullBasicMT"
  language="py"
/>

</details>

## <i class="fa-solid fa-square-chevron-right"></i> Work with a tenant

Interacting with each tenant's data in a multi-tenant collection is similar to interacting with a single-tenant collection.

<FilteredTextBlock
  text={PyCode}
  startMarker="# BasicTenantInteraction"
  endMarker="# END BasicTenantInteraction"
  language="py"
/>

### <i class="fa-solid fa-code"></i> Add data to a tenant

#### Single object insertion

To add data to a tenant, you can use the `.data` namespace:

<FilteredTextBlock
  text={PyCode}
  startMarker="# BasicDataInsertion"
  endMarker="# END BasicDataInsertion"
  language="py"
/>

#### Batch data insertion

Tenants can be used just like collections for batch insertions. Here is a basic example:

<FilteredTextBlock
  text={PyCode}
  startMarker="# BasicBatchInsertion"
  endMarker="# END BasicBatchInsertion"
  language="py"
/>

### <i class="fa-solid fa-code"></i> Query data from a tenant

Once a tenant has been populated with data, you can query it just like you would a single-tenant collection:

<FilteredTextBlock
  text={PyCode}
  startMarker="# BasicMTQuery"
  endMarker="# END BasicMTQuery"
  language="py"
/>

<details>
  <summary>Example response</summary>

<FilteredTextBlock
  text={PyCode}
  startMarker="# ExampleResponseBasicMTQuery"
  endMarker="# END ExampleResponseBasicMTQuery"
  language="json"
/>
</details>

## <i class="fa-solid fa-square-chevron-right"></i> Summary

As you can see, working with a tenant in a multi-tenant collection is very similar to working with a single-tenant collection. The main difference is that you can manage multiple tenants independently.

In the next section, we will discuss more advanced topics such as additional options for collection creation, and how to manage tenants.

## Questions and feedback

import DocsFeedback from '/_includes/docs-feedback.mdx';

<DocsFeedback/>

